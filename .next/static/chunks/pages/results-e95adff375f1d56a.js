(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[255],{2467:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/results",function(){return n(6480)}])},8144:function(e,t){"use strict";t.Z={src:"/_next/static/media/bus-solid.3369ab7f.svg",height:512,width:512}},4683:function(e,t,n){"use strict";var r=n(7568),s=n(655),o=n(5893),i=n(1664),c=n.n(i);n(7294),n(5675),n(5305);var l=n(8384),u=n(5935),a=n(1163),d=function(){var e=(0,l.Eu)(),t=e.currentUser;e.isUserLoading;var n=(0,a.useRouter)();return(0,o.jsx)("div",{children:(0,o.jsx)("nav",{className:"bg-white shadow ",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-8",children:(0,o.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,o.jsxs)("div",{className:"w-full justify-between flex items-center",children:[(0,o.jsx)(c(),{className:"flex-shrink-0 cursor-pointer font-bold",href:"/",children:"LOGO"}),(0,o.jsx)("div",{className:"hidden md:block",children:(0,o.jsxs)("div",{className:"ml-10 flex items-baseline space-x-11",children:[(0,o.jsx)(c(),{className:"text-gray-300 hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium",href:"/home",children:"Home"}),(0,o.jsx)(c(),{className:"text-gray-300 hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium",href:"/jobs",children:"Jobs"}),t.admin?(0,o.jsx)(c(),{className:"text-gray-300 hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium",href:"/admin",children:(0,o.jsx)("span",{className:"underline text-pink_red cursor-pointer",children:"Admin"})}):(0,o.jsx)(o.Fragment,{}),(0,o.jsx)("a",{onClick:(0,r.Z)(function(){return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,u.I8.signOut().then(function(){console.log("signed out")}).catch(function(e){console.log(e)})];case 1:return e.sent(),n.push("/"),[2]}})}),className:"underline text-pink_red cursor-pointer",children:"Log Out"})]})})]}),(0,o.jsx)("div",{className:"block",children:(0,o.jsx)("div",{className:"ml-4 flex items-center md:ml-6"})}),(0,o.jsx)("div",{className:"-mr-2 flex md:hidden",children:(0,o.jsx)("button",{className:"text-gray-800 dark:text-white hover:text-gray-300 inline-flex items-center justify-center p-2 rounded-md focus:outline-none",children:(0,o.jsx)("svg",{width:"20",height:"20",fill:"currentColor",className:"h-8 w-8",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"})})})})]})})})})};t.Z=d},6559:function(e,t,n){"use strict";n.d(t,{EC:function(){return u},Kd:function(){return b},WO:function(){return p},cg:function(){return v},d$:function(){return d},jT:function(){return f},mS:function(){return j},mv:function(){return m},qW:function(){return c}});var r=n(7568),s=n(655),o=n(5935),i=n(7632);function c(e){return l.apply(this,arguments)}function l(){return(l=(0,r.Z)(function(e){return(0,s.__generator)(this,function(t){return o.RZ.collection("routes").doc(e).delete().then(function(){console.log("route deleted")}),[2]})})).apply(this,arguments)}function u(e){return a.apply(this,arguments)}function a(){return(a=(0,r.Z)(function(e){return(0,s.__generator)(this,function(t){return o.RZ.collection("busses").doc(e).delete().then(function(){console.log("bus deleted")}),[2]})})).apply(this,arguments)}function d(e){return h.apply(this,arguments)}function h(){return(h=(0,r.Z)(function(e){return(0,s.__generator)(this,function(t){return o.RZ.collection("bookings").doc(e).delete().then(function(){console.log("route deleted")}),[2]})})).apply(this,arguments)}function f(e){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(function(e){return(0,s.__generator)(this,function(t){return o.RZ.collection("bookings").doc(e).update({paid:!0}).then(function(){console.log("Booking payment approved")}).catch(function(e){console.log(e)}),[2]})})).apply(this,arguments)}function m(e,t,n,r,s,c,l){var u=(0,i.Z)();o.RZ.collection("bookings").doc(u).set({uid:u,user_uid:e,bus_id:t,route_id:n,departure_time:r,number_of_tickets:s,total_price:c,date:l,paid:!1}).then(function(){console.log("booking made")}).catch(function(e){console.log(e)})}function p(e,t,n,r){return g.apply(this,arguments)}function g(){return(g=(0,r.Z)(function(e,t,n,r){var c;return(0,s.__generator)(this,function(s){return c=(0,i.Z)(),o.RZ.collection("busses").doc(c).set({departure_time:e,number_of_seats:t,number_plate:n,routes_uid:r,uid:c}).then(function(){console.log("bus added")}).catch(function(e){console.log(e)}),[2]})})).apply(this,arguments)}function j(e,t,n,r,s){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function(e,t,n,r,i){return(0,s.__generator)(this,function(s){return o.RZ.collection("busses").doc(e).update({departure_time:t,number_of_seats:n,number_plate:r,routes_uid:i}).then(function(){console.log("bus changes made")}).catch(function(e){console.log(e)}),[2]})})).apply(this,arguments)}function v(e,t){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)(function(e,t){var n,r;return(0,s.__generator)(this,function(n){return r=(0,i.Z)(),o.RZ.collection("routes").where("from.name","==",e.name).where("to.name","==",t.name).get().then(function(n){n.empty?o.RZ.collection("routes").doc(r).set({from:e,to:t,uid:r}).then(function(){console.log("Route added")}).catch(function(e){console.log(e)}):console.log("route already exists")}),[2]})})).apply(this,arguments)}function b(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,r.Z)(function(e,t,n){return(0,s.__generator)(this,function(r){return o.RZ.collection("routes").doc(e).update({from:t,to:n}).then(function(){console.log("Route changes made")}).catch(function(e){console.log(e)}),[2]})})).apply(this,arguments)}},6480:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(7568),s=n(655),o=n(5893),i=n(5675),c=n.n(i),l=n(1163),u=n(7294),a=n(4683),d=n(8384),h=n(5935),f=n(6559),x={src:"/_next/static/media/arrow-right-solid.ab3f199d.svg",height:512,width:448},m=n(8144),p=n(7302),g=function(){var e=(0,d.Eu)(),t=e.currentUser,n=e.isUserLoading,i=(0,u.useState)([]),g=i[0],j=i[1],y=(0,l.useRouter)();return((0,u.useEffect)(function(){var e;(e=(0,r.Z)(function(){return(0,s.__generator)(this,function(e){switch(e.label){case 0:return[4,h.RZ.collection("busses").where("routes_uid","==",y.query.route).get().then(function(e){var t=[];e.docs.forEach(function(e){t.push(e.data())}),console.log(t),j(t)})];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[y.query]),n)?(0,o.jsx)("div",{className:"flex flex-col items-center justify-center h-screen",children:(0,o.jsx)(c(),{src:p.Z,alt:"Loading..."})}):(0,o.jsxs)("div",{className:"min-h-screen w-screen",children:[(0,o.jsx)(a.Z,{}),(0,o.jsx)("h1",{className:"text-4xl text-pink_red m-5",children:"Search Results"}),(0,o.jsx)("h1",{className:"text-xl text-white font-bold",children:"22 November 2022"}),(0,o.jsx)("div",{className:"w-screen h-1/12 bg-pink_red",children:(0,o.jsxs)("div",{className:"flex space-x-10 text-white py-4 text-center mx-auto justify-center px-40",children:[(0,o.jsx)("h1",{className:"text-3xl",children:y.query.from}),(0,o.jsx)("div",{className:"w-1/4 text-white",children:(0,o.jsx)(c(),{className:"fill-white",src:x,height:50,alt:"To"})}),(0,o.jsx)("h1",{className:"text-3xl",children:y.query.to})]})}),g.length<=0?(0,o.jsx)("div",{className:"text-center p-10 text-4xl h-full",children:(0,o.jsx)("h1",{children:"No results"})}):(0,o.jsx)("div",{className:"flex flex-col h-full",children:g.map(function(e){return(0,o.jsx)("div",{className:"flex m-4 shadow-md",children:(0,o.jsxs)("div",{className:"mr-10 flex flex-row p-3 justify-between align-middle",children:[(0,o.jsx)("div",{className:"w-2/6 overflow-hidden my-auto",children:(0,o.jsx)(c(),{src:m.Z,height:100,alt:"To"})}),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("h1",{className:"text-2xl text-gray-400 font-bold",children:"Number Plate:"}),(0,o.jsx)("h1",{className:"text-2xl font-bold",children:e.number_plate}),(0,o.jsx)("h1",{className:"font-bold text-2xl"}),(0,o.jsx)("h2",{children:"Normal/VIP"})]}),(0,o.jsxs)("div",{className:"flex flex-col ml",children:[(0,o.jsxs)("span",{children:[(0,o.jsx)("h1",{className:"text-gray-400 font-bold",children:"Departure Time"}),(0,o.jsxs)("h2",{children:[e.departure_time," PM"]})]}),(0,o.jsxs)("span",{children:[(0,o.jsx)("h1",{className:"text-gray-400 font-bold",children:"Seats:"}),(0,o.jsx)("h2",{children:e.number_of_seats})]}),(0,o.jsxs)("span",{children:[(0,o.jsx)("h1",{className:"text-gray-400 font-bold",children:"Amount:"}),(0,o.jsx)("h2",{children:y.query.amount})]})]}),(0,o.jsx)("div",{className:"flex flex-col space-y-3",children:(0,o.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,o.jsx)("h1",{className:"text-gray-400 font-bold",children:"Price per ticket:"}),(0,o.jsx)("h1",{children:"1000 Ksh"})]})}),(0,o.jsx)("div",{className:"flex flex-col space-y-3",children:(0,o.jsxs)("div",{className:"flex flex-col justify-start",children:[(0,o.jsx)("h1",{className:"text-gray-400 font-bold",children:"Total:"}),(0,o.jsxs)("h1",{children:[1e3*y.query.amount," Ksh"]})]})}),(0,o.jsx)("div",{children:(0,o.jsx)("button",{className:"bg-pink_red rounded-md p-2 text-white mx-2",onClick:function(){var n=1e3*y.query.amount;(0,f.mv)(t.uid,e.uid,e.routes_uid,e.departure_time,y.query.amount,n,y.query.date),setTimeout(function(){y.push("/home")},2e3)},children:"Book seat"})})]})},e.uid)})})]})}},7632:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});let r="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var s={randomUUID:r};let o,i=new Uint8Array(16);function c(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(i)}let l=[];for(let u=0;u<256;++u)l.push((u+256).toString(16).slice(1));var a=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();e=e||{};let r=e.random||(e.rng||c)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let o=0;o<16;++o)t[n+o]=r[o];return t}return function(e,t=0){return(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase()}(r)}}},function(e){e.O(0,[640,951,774,888,179],function(){return e(e.s=2467)}),_N_E=e.O()}]);